# Preface {-}

科学者、アナリスト、コンサルタントなど、技術文書や報告書を作成しなければならない人なら、最も重要なスキルの1つは、説得力のあるデータの可視化（一般的には図の形式）を行う能力です。図表は、通常、あなたの主張の重みを担います。明確で、魅力的で、説得力のあるものでなければなりません。図表の良し悪しが、影響力のある論文か無名の論文か、助成金や契約の獲得か喪失か、面接がうまくいくか行かないかの分かれ目になることもあります。しかし、説得力のあるデータビジュアライゼーションの作り方を教えてくれる資料は、驚くほど少ないのが現状です。このトピックに関するコースを設けている大学はほとんどなく、このトピックに関する書籍もそれほど多くはない。(プロットソフトのチュートリアルは、一般的に、特定の視覚効果を得る方法に重点を置いており、ある選択が好まれ、他の選択が好まれない理由を説明するものではありません。日々の仕事では、単に良い図を作る方法を知っていることが期待され、幸運にも、初めて科学論文を書くときに、いくつかのコツを教えてくれる辛抱強い指導教官がいます。

ライティングの文脈では、経験豊富なエディターが「耳」について話しますが、これは、文章を読むときに、その文章が良いものかどうかを（内的に）聞き分ける能力です。図表やビジュアライゼーションについても、同様に、その図表がバランスよく、明確で、説得力があるかどうかを見極める「目」が必要だと思います。そして、文章を書くときと同じように、図がうまくいくかどうかを見極める力は身につけることができます。目を持つということは、単純なルールや良いビジュアライゼーションの原則をより多く知っているということであり、他の人が気付かないような小さなことにも注意を払うということです。

私の経験では、文章を書くのと同じように、週末に本を読んだからといって目が養われるわけではありません。複雑すぎたり、微妙すぎたりするコンセプトも、5年後にはもっと理解できるようになるかもしれません。私自身は、フィギュアへの理解を深めるために進化し続けていると言えます。日頃から新しいアプローチに触れるようにしていますし、他の人がフィギュアで行うビジュアルやデザインの選択にも注意を向けています。また、私は自分の考えを変えることに前向きです。今日は素晴らしいと思ったフィギュアも、来月には批判する理由が見つかるかもしれません。ですから、私の言うことを鵜呑みにしないでください。私の言うことを鵜呑みにせず、その理由をよく考えて、採用するかどうか決めてください。

本書は論理的な流れで書かれていますが、ほとんどの章は単独で読むことができますし、隅から隅まで読む必要はありません。今興味のある部分や、デザインについて考えている部分など、自由に読み進めてください。一度に全部読むのではなく、少しずつ長い時間をかけて読み進め、この本に書かれているコンセプトを少しずつ自分のフィギュア作りに活かしていき、また別のコンセプトを読み返したり、少し前に学んだコンセプトを読み直したりすると、この本から最大限の力を引き出すことができると思います。同じ章でも、数ヶ月経ってから読み直すと、違うことが書かれていることに気づくかもしれません。

本書のほぼすべての図がRとggplot2で作られているにもかかわらず、私はこれをRの本とは見なさない。図作成の一般原則の話です。図を作るのに使ったソフトは付随的なものです。ここで紹介するような図を作るには、どんなプロットソフトを使ってもいいのです。しかし、ggplot2やそれに似たパッケージは、私が使っている多くのテクニックを、他のプロッティング・ライブラリよりもずっとシンプルにします。重要なことは、この本はRの本ではないので、コードやプログラミングのテクニックはこの本のどこにも書いていないことです。コードではなく、コンセプトと図に注目してほしいのです。もし、図がどのように作られたのか興味があれば、この本のGitHubリポジトリ（https://github.com/clauswilke/dataviz）でソースコードをチェックすることができます。 

## Thoughts on graphing software and figure-preparation pipelines {-}

私は20年以上にわたって科学論文の図表作成の経験があり、これまで何千枚もの図表を作成してきました。この20年の間に不変のものがあるとすれば、それは図作成パイプラインの変化でしょう。数年ごとに新しいプロッティングライブラリが開発されたり、新しいパラダイムが生まれたりして、多くの科学者がその新しいツールキットに乗り換えています。私はgnuplot, Xfig, Mathematica, Matlab, pythonのmatplotlib, base R, Rのggplot2、そしておそらく他のものも使って図を作ってきましたが、現在は思い出せません。現在、私が好んで使っているのはRのggplot2ですが、定年まで使い続けるとは思っていません。

このようにソフトウェア・プラットフォームが常に変化していることが、本書がプログラミングの本ではなく、すべてのコード例を省いた重要な理由の一つである。この本は、どのソフトウェアを使っても役に立つようにしたいし、みんながggplot2から離れて次の新しいものを使うようになっても、この本の価値は変わらないようにしたいのです。この選択は、ある図をどのように作ったかを知りたい一部のggplot2ユーザーをいらだたせるかもしれないことは承知しています。そのような人には、この本のソースコードを読んでくださいと言います。利用可能です。また、将来的には、コードだけに焦点を当てた補足資料を公開するかもしれません。

長年にわたって学んだことのひとつは、自動化はあなたの友人であるということです。私は、図はデータ解析パイプラインの一部として自動生成されるべきであり（これも自動化されるべきです）、パイプラインから出力された図は、印刷所に送る準備ができていて、手動による後処理は必要ないと考えています。多くの研修生が図のラフを自動生成し、それをIllustratorにインポートして見栄えを良くしているのを見かけます。このやり方が良くない理由はいくつかあります。まず、手動で編集した時点で、最終的な図が再現不可能になります。第三者は、あなたが行ったのと全く同じ図を作成することはできません。軸のラベルのフォントを変えただけならそれほど問題にはならないかもしれませんが、境界線は曖昧で、物事がより明確でない領域に容易に入り込んでしまうのです。例えば、不可解なラベルを読みやすいものに手動で置き換える場合を考えてみましょう。このとき、第三者がその置き換えが適切であったかを検証できない可能性があります。第二に、図版作成のパイプラインに手作業による後処理を多く加えると、変更ややり直しに消極的になってしまうでしょう。そのため、共同研究者や同僚からの合理的な変更要求を無視したり、実際にすべてのデータを再生成したにもかかわらず、古い図を再利用したくなったりすることがあります。これらはでっち上げの例ではありません。私は、実在の人物と実在の論文で、これらのことが起こるのを目の当たりにしてきました。3つ目は、ある図を作成するために何をしたかを忘れてしまったり、新しいデータで以前の図と全く同じ視覚的な図を作成することができなかったりする場合です。

以上のような理由から、対話型プロットプログラムは良くないと言えます。それらは本質的に、手動で図を作成することを強制します。実際、対話型プロットプログラムですべての図を手作業で作るよりも、図の下書きを自動生成してイラストレーターで見栄えを良くする方がいいかもしれません。Excelもインタラクティブなプロットプログラムなので、図の作成（あるいはデータ分析）にはお勧めできません。

データの可視化に関する本で重要な要素の1つは，提案された可視化の実現可能性である．エレガントな新しい可視化方法を発明するのはいいことだが、誰もその可視化を使って簡単に図を作成できなければ、あまり意味がない。例えば、タフトが初めてスパークラインを提案したとき、誰もそれを簡単に作ることができなかった。可能性の限界を押し広げて世界を前進させる先見の明は必要ですが、私はこの本が実用的で、出版物の図を作成する現役のデータ科学者に直接適用できるものであることを想定しています。したがって、私が以降の章で提案する可視化は、ggplot2や容易に入手できる拡張パッケージを介して、数行のRコードで生成することができる。実際、本書に掲載されているほぼすべての図が、 \@ref(no-3d), \@ref(image-file-formats), および \@ref(choosing-visualization-software) 章のいくつかの図を除いて、図の通りに自動生成されています。 無料版のDeepL翻訳（www.DeepL.com/Translator）で翻訳しました。

## Acknowledgments {-}

このプロジェクトは、RStudioチームがRユニバースを一流の出版プラットフォームにするために注いだ素晴らしい仕事なしには、実現しなかったことでしょう。特に、Hadley Wickham には、本書のすべての図の作成に使用したプロットソフトウェアである **ggplot2** を作成していただき、感謝いたします。また、R Markdown を作成し、**knitr** と **bookdown** パッケージを記述してくれた Yihui Xie にも感謝したい。これらのツールが用意されていなければ、このプロジェクトを始めることはなかったと思います。R Markdownファイルを書くのは楽しいですし、材料を集めるのも簡単で勢いがつきます。特に、**colorspace**のAchim ZeileisとReto Stauffer、**ggforce**と**ganimate**のThomas Lin Pedersen、**ggrepel**のKamil Slowikowski、**sf** の Edzer Pebesma、組み立てられたR図における色覚異常をシミュレーションするための **colorspace** と **colorblindr** の Clair McWhiteの仕事に感謝します。

本書のドラフト版に対して、何人かの方々から有益なフィードバックをいただきました。最も重要なのは、オライリーの編集者であるMike LoukidesとSteve Harozの二人がすべての章を読み、コメントをくれたことです。また、Carl Bergstrom, Jessica Hullman, Matthew Kay, Edzer Pebesma, Tristan Mahr, Jon Schwabish, そして Hadley Wickham からも有益なコメントを頂きました。Len KieferのブログとKieran Healyの本とブログの投稿は、作るべき図と使うべきデータセットについて多くのインスピレーションを与えてくれました。Thiago Arrais, Malcolm Barrett, Jessica Burnett, Jon Calder, Antônio Pedro Camargo, Daren Card, Kim Cressman, Akos Hajdu, Andrew Kinsman, Will Koehrsen, Alex Lalejiniなど多くの方から細かい問題点や誤字を指摘していただいた。John Leadley, Katrin Leinweber, Mikel Madina, Claire McWhite, S'busiso Mkhondwane, Jose Nazario, Steve Putman, Maëlle Salmon, Christian Schudoma, James Scott-Brown, Enrico Spinielli, Wouter van der Bijl そして Ron Yurko です。

また、より広くtidyverseとRコミュニティ全般への他のすべての貢献者に感謝したいと思います。人が遭遇する可能性のあるあらゆる可視化の課題のためのRパッケージが本当に存在します。これらのパッケージはすべて、何千人ものデータ科学者や統計学者からなる広範なコミュニティによって開発され、その多くが何らかの形でこの本の制作に貢献してくれています。